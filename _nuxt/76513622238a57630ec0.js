(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{266:function(t,e,r){"use strict";r(48);var n=r(66),o=r.n(n),d=r(274),c={baseUrl:"https://dev29983.sites.leocorn.com/solr/covid19_raw/",get searchEndPoint(){return this.baseUrl+"select"},get updateEndPoint(){return this.baseUrl+"update/json/docs?commit=true"},pivotField:"country_region",pivotFieldLabel:"Country/Region",getHeaders:function(){return[{text:this.pivotFieldLabel,value:this.pivotField},{text:"Confirmed",value:"confirmed"},{text:"New Confirmed",value:"new_confirmed"},{text:"Deaths",value:"death"},{text:"New Deaths",value:"new_death"},{text:"Recovered",value:"recovered"}]},getCases:function(t,e,r){var n=this,d=(new Date).toISOString().split("T")[0],c=n.buildTotalQuery(t,d);o.a.post(n.searchEndPoint,c).then((function(e){var o=new Date(e.data.response.docs[0]._modified_);t.lastUpdated=o;var d=e.data.facet_counts.facet_pivot;t.cases=n.loadCasesStats(d[n.pivotField]),t.total=n.loadTotalStats(e.data.stats),r&&r()})).catch((function(t){}))},buildTotalQuery:function(t,e){var r=["day:"+e];return t.filters.length>0?(r.push("country_region:"+t.filters[0].value),this.pivotField="province_state",this.pivotFieldLabel="Province/State"):(this.pivotField="country_region",this.pivotFieldLabel="Country/Region"),{query:"*:*",params:{rows:1,start:0,sort:"_modified_ desc",fq:r,stats:"true","stats.field":["{!tag=all3 max=true min=true sum=true}confirmed","{!tag=all3 max=true min=true sum=true}death","{!tag=all3 max=true min=true sum=true}recovered","{!tag=all3 max=true min=true sum=true}new_confirmed","{!tag=all3 max=true min=true sum=true}new_death","{!tag=all3 max=true min=true sum=true}new_recovered"],facet:"true","facet.limit":-1,"facet.pivot":"{!stats=all3}"+this.pivotField}}},loadCasesStats:function(t){var e=this;return t.map((function(t){var r={};return r[e.pivotField]=t.value,r.facet_count=t.count,r.confirmed=t.stats.stats_fields.confirmed.sum,r.death=t.stats.stats_fields.death.sum,r.recovered=t.stats.stats_fields.recovered.sum,r.new_confirmed=t.stats.stats_fields.new_confirmed.sum,r.new_death=t.stats.stats_fields.new_death.sum,r.new_recovered=t.stats.stats_fields.new_recovered.sum,r}))},loadTotalStats:function(t){return{confirmed:t.stats_fields.confirmed.sum,death:t.stats_fields.death.sum,recovered:t.stats_fields.recovered.sum,new_confirmed:t.stats_fields.new_confirmed.sum,new_death:t.stats_fields.new_death.sum,new_recovered:t.stats_fields.new_recovered.sum}},getCasesByDay:function(t,e){o.a.post(this.searchEndPoint,{query:"*:*",params:{rows:1,start:0,sort:"_modified_ desc",stats:"true","stats.field":["{!tag=all3 max=true min=true sum=true}confirmed","{!tag=all3 max=true min=true sum=true}death","{!tag=all3 max=true min=true sum=true}recovered","{!tag=all3 max=true min=true sum=true}new_confirmed","{!tag=all3 max=true min=true sum=true}new_death","{!tag=all3 max=true min=true sum=true}new_recovered"],facet:"true","facet.limit":-1,"facet.pivot":"{!stats=all3}day"}}).then((function(r){var n=new Date(r.data.response.docs[0]._modified_);t.lastUpdated=n;var o=r.data.facet_counts.facet_pivot;t.casesByDay=["confirmed","death","recovered","new_confirmed","new_death","new_recovered"].map((function(t){return{category:t,numbers:o.day.map((function(e){return{date:new Date(e.value),cases:e.stats.stats_fields[t].sum}}))}})),e&&e()})).catch((function(t){}))},initLinesSvg:function(t,e){t.svg=d.i("#"+e).append("svg").attr("width","100%").attr("height",580);var r=t.svg.node().getBoundingClientRect();t.chartWidth=r.width-t.chartMargin.left-t.chartMargin.right,t.chartHeight=r.height-t.chartMargin.top-t.chartMargin.bottom,t.linesGroup=t.svg.append("g").attr("transform","translate("+t.chartMargin.left+","+t.chartMargin.top+")"),t.xRange=d.h().rangeRound([0,t.chartWidth]),t.yRange=d.g().rangeRound([t.chartHeight,0]),t.lineFunc=d.e().x((function(e){return t.xRange(new Date(e.date))})).y((function(e){return t.yRange(+e.cases)}))},setupLinesAxes:function(t,e){t.xRange.domain(d.d(e,(function(t){return new Date(t.date)}))),t.yRange.domain([0,d.f(e,(function(t){return+t.cases}))+10]),t.linesGroup.append("g").attr("transform","translate(0,"+t.chartHeight+")").call(d.a(t.xRange)),t.linesGroup.append("g").call(d.b(t.yRange)).append("text").attr("fill","#000").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("COVID-19 Cases")},drawLinesPath:function(t,data,e){var path=t.linesGroup.append("path").datum(data).attr("fill","none").attr("stroke",e.color).attr("stroke-linejoin","miter").attr("stroke-linecap","miter").attr("stroke-width",e.width).attr("d",t.lineFunc),r=path.node().getTotalLength();path.attr("stroke-dasharray",r+" "+r).attr("stroke-dashoffset",r).transition().duration(5e3).ease(d.c).attr("stroke-dashoffset",0)}};e.a=c},273:function(t,e,r){var content=r(383);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(33).default)("febade58",content,!0,{sourceMap:!1})},382:function(t,e,r){"use strict";var n=r(273);r.n(n).a},383:function(t,e,r){(e=r(32)(!1)).push([t.i,"",""]),t.exports=e},429:function(t,e,r){"use strict";r.r(e);r(281);var n=r(266),o=r(282),d={data:function(){return{pageHead:"COVID-19 Global Cases",dataTableHead:"Cases breakdown by countries",total:{confirmed:0,death:0,recovered:0,new_confirmed:0,new_death:0,new_recovered:0},perPage:15,sortBy:["confirmed"],cases:[],lastUpdated:null,headers:n.a.getHeaders(),currentTime:new Date,numFormater:new Intl.NumberFormat("en-US"),timeFormatter:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:"GMT",timeZoneName:"short"}),timerAmount:120,timer:120,tableSearch:"",filters:[]}},created:function(){var t=this;n.a.getCases(this,0,(function(){t.confirmedCount.update(t.total.confirmed),t.deathCount.update(t.total.death),t.recoveredCount.update(t.total.recovered),setInterval((function(){return t.clockTick()}),1e3)}))},mounted:function(){this.confirmedCount=new o.a("confirmedId",this.total.confirmed),this.deathCount=new o.a("deathId",this.total.death),this.recoveredCount=new o.a("recoveredId",this.total.recovered)},methods:{reload:function(){var t=this;t.cleanData(),n.a.getCases(this,0,(function(){t.confirmedCount.update(t.total.confirmed),t.deathCount.update(t.total.death),t.recoveredCount.update(t.total.recovered),t.timer=t.timerAmount})),t.headers=n.a.getHeaders()},cleanData:function(){this.total={confirmed:0,death:0,recovered:0,new_confirmed:0,new_death:0,new_recovered:0},this.cases=[],this.lastUpdated=null,this.confirmedCount.reset(),this.deathCount.reset(),this.recoveredCount.reset(),this.timer=this.timerAmount},selectCountry:function(t){this.filters[0]={name:"country",value:t},this.reload(),this.tableSearch="",this.pageHead="COVID-19 Cases - "+t,this.dataTableHead=t+" cases by states"},clockTick:function(){this.currentTime=new Date,this.timer>0?this.timer--:this.reload()},timerFormat:function(t){return(Math.floor(t/60)+"").padStart(2,"0")+":"+(t%60+"").padStart(2,"0")},getBreadcrumbs:function(){var t=[{text:"Global Cases",disable:!1,href:"/"}];return this.filters.length>0&&t.push({text:this.filters[0].value,disable:!1}),t}}},c=(r(382),r(53)),l=r(112),m=r.n(l),v=r(431),f=r(296),h=r(285),_=r(241),w=r(292),y=r(423),C=r(424),x=r(427),F=r(290),k=r(287),D=r(425),S=r(426),T=r(417),R=r(430),component=Object(c.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-xs":""}},[t.filters.length>0?r("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:t.getBreadcrumbs()}}):t._e(),r("h1",{staticClass:"text-center"},[t._v(t._s(t.pageHead))]),r("v-row",[r("v-col",[r("v-chip",{attrs:{label:""}},[t._v(t._s(t.timeFormatter.format(t.currentTime)))])],1),r("v-spacer"),r("v-col",[r("v-chip",{attrs:{label:""}},[t._v("Last updated:"),r("i",{staticClass:"text--primary"},[t._v(t._s(t.timeFormatter.format(t.lastUpdated)))])])],1),r("v-spacer"),r("v-col",{staticClass:"text-right"},[r("v-btn",{staticClass:"ml-2 lighten-4",attrs:{small:"",color:"teal"},on:{click:t.reload}},[r("v-icon",{attrs:{left:""}},[t._v("mdi-reload")]),t._v("Refresh in "+t._s(t.timerFormat(t.timer)))],1)],1)],1),r("v-progress-linear",{attrs:{value:(t.timerAmount-t.timer)/t.timerAmount*100}}),r("v-row",[r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"warning",shaped:""}},[r("v-card-text",[r("div",[t._v("Confirmed")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"confirmedId"}},[t._v(t._s(t.numFormater.format(t.total.confirmed)))])]),r("div",[t._v("New confimed")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newConfirmedId"}},[t._v(t._s(t.numFormater.format(t.total.new_confirmed)))])])])],1)],1),r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"error",shaped:""}},[r("v-card-text",[r("div",[t._v("Deaths")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"deathId"}},[t._v(t._s(t.numFormater.format(t.total.death)))])]),r("div",[t._v("New deaths")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newDeathId"}},[t._v(t._s(t.numFormater.format(t.total.new_death)))])])])],1)],1),r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"success",shaped:""}},[r("v-card-text",[r("div",[t._v("Recovered")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"recoveredId"}},[t._v(t._s(t.numFormater.format(t.total.recovered)))])]),r("div",[t._v("New recovered")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newRecoveredId"}},[t._v(t._s(t.numFormater.format(t.total.new_recovered)))])])])],1)],1)],1),r("v-toolbar",{staticClass:"mb-2",attrs:{dense:""}},[r("v-spacer"),r("v-btn",{attrs:{icon:"",to:"/",nuxt:""}},[r("v-icon",[t._v("mdi-table-large")])],1),r("v-btn",{attrs:{icon:"",to:"/lines",nuxt:""}},[r("v-icon",[t._v("mdi-chart-line")])],1),r("v-spacer")],1),r("v-card",[r("v-card-title",[r("h3",[t._v(t._s(t.dataTableHead))]),r("v-spacer"),r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:t.tableSearch,callback:function(e){t.tableSearch=e},expression:"tableSearch"}})],1),r("v-card-text",[r("v-data-table",{attrs:{headers:t.headers,items:t.cases,"items-per-page":t.perPage,sortBy:t.sortBy,search:t.tableSearch,sortDesc:""},scopedSlots:t._u([{key:"item.country_region",fn:function(e){var n=e.item;return[n.facet_count>1?r("a",{on:{click:function(e){return t.selectCountry(n.country_region)}}},[t._v(t._s(n.country_region))]):r("span",[t._v(t._s(n.country_region))])]}},{key:"item.confirmed",fn:function(e){var r=e.item;return[t._v(t._s(t.numFormater.format(r.confirmed)))]}},{key:"item.new_confirmed",fn:function(e){var r=e.item;return[t._v(t._s(t.numFormater.format(r.new_confirmed)))]}},{key:"item.death",fn:function(e){var r=e.item;return[t._v(t._s(t.numFormater.format(r.death)))]}},{key:"item.new_death",fn:function(e){var r=e.item;return[t._v(t._s(t.numFormater.format(r.new_death)))]}},{key:"item.recovered",fn:function(e){var r=e.item;return[t._v(t._s(t.numFormater.format(r.recovered)))]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;m()(component,{VBreadcrumbs:v.a,VBtn:f.a,VCard:h.a,VCardText:_.a,VCardTitle:_.b,VChip:w.a,VCol:y.a,VContainer:C.a,VDataTable:x.a,VIcon:F.a,VProgressLinear:k.a,VRow:D.a,VSpacer:S.a,VTextField:T.a,VToolbar:R.a})}}]);