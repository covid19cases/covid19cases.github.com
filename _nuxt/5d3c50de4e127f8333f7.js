(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{241:function(e,t,r){var content=r(271);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(33).default)("febade58",content,!0,{sourceMap:!1})},270:function(e,t,r){"use strict";var n=r(241);r.n(n).a},271:function(e,t,r){(t=r(32)(!1)).push([e.i,"",""]),e.exports=t},342:function(e,t,r){"use strict";r.r(t);r(267),r(48);var n=r(66),o=r.n(n),d={baseUrl:"https://dev29983.sites.leocorn.com/solr/covid19_raw/",get searchEndPoint(){return this.baseUrl+"select"},get updateEndPoint(){return this.baseUrl+"update/json/docs?commit=true"},pivotField:"country_region",pivotFieldLabel:"Country/Region",getHeaders:function(){return[{text:this.pivotFieldLabel,value:this.pivotField},{text:"Confirmed",value:"confirmed"},{text:"New Confirmed",value:"new_confirmed"},{text:"Deaths",value:"death"},{text:"New Deaths",value:"new_death"},{text:"Recovered",value:"recovered"}]},getCases:function(e,t,r){var n=this,d=(new Date).toISOString().split("T")[0],c=n.buildTotalQuery(e,d);o.a.post(n.searchEndPoint,c).then((function(t){var o=new Date(t.data.response.docs[0]._modified_);e.lastUpdated=o;var d=t.data.facet_counts.facet_pivot;e.cases=n.loadCasesStats(d[n.pivotField]),e.total=n.loadTotalStats(t.data.stats),r&&r()})).catch((function(e){}))},buildTotalQuery:function(e,t){var r=["day:"+t];return e.filters.length>0?(r.push("country_region:"+e.filters[0].value),this.pivotField="province_state",this.pivotFieldLabel="Province/State"):(this.pivotField="country_region",this.pivotFieldLabel="Country/Region"),{query:"*:*",params:{rows:1,start:0,sort:"_modified_ desc",fq:r,stats:"true","stats.field":["{!tag=all3 max=true min=true sum=true}confirmed","{!tag=all3 max=true min=true sum=true}death","{!tag=all3 max=true min=true sum=true}recovered","{!tag=all3 max=true min=true sum=true}new_confirmed","{!tag=all3 max=true min=true sum=true}new_death","{!tag=all3 max=true min=true sum=true}new_recovered"],facet:"true","facet.limit":-1,"facet.pivot":"{!stats=all3}"+this.pivotField}}},loadCasesStats:function(e){var t=this;return e.map((function(e){var r={};return r[t.pivotField]=e.value,r.facet_count=e.count,r.confirmed=e.stats.stats_fields.confirmed.sum,r.death=e.stats.stats_fields.death.sum,r.recovered=e.stats.stats_fields.recovered.sum,r.new_confirmed=e.stats.stats_fields.new_confirmed.sum,r.new_death=e.stats.stats_fields.new_death.sum,r.new_recovered=e.stats.stats_fields.new_recovered.sum,r}))},loadTotalStats:function(e){return{confirmed:e.stats_fields.confirmed.sum,death:e.stats_fields.death.sum,recovered:e.stats_fields.recovered.sum,new_confirmed:e.stats_fields.new_confirmed.sum,new_death:e.stats_fields.new_death.sum,new_recovered:e.stats_fields.new_recovered.sum}}},c=r(269),l={data:function(){return{pageHead:"COVID-19 Global Cases",dataTableHead:"Cases break down by countries",total:{confirmed:0,death:0,recovered:0,new_confirmed:0,new_death:0,new_recovered:0},perPage:15,sortBy:["confirmed"],cases:[],lastUpdated:null,headers:d.getHeaders(),currentTime:new Date,numFormater:new Intl.NumberFormat("en-US"),timeFormatter:new Intl.DateTimeFormat("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:"GMT",timeZoneName:"short"}),timerAmount:120,timer:120,tableSearch:"",filters:[]}},created:function(){var e=this;d.getCases(this,0,(function(){e.confirmedCount.update(e.total.confirmed),e.deathCount.update(e.total.death),e.recoveredCount.update(e.total.recovered),setInterval((function(){return e.clockTick()}),1e3)}))},mounted:function(){this.confirmedCount=new c.a("confirmedId",this.total.confirmed),this.deathCount=new c.a("deathId",this.total.death),this.recoveredCount=new c.a("recoveredId",this.total.recovered)},methods:{reload:function(){var e=this;e.cleanData(),d.getCases(this,0,(function(){e.confirmedCount.update(e.total.confirmed),e.deathCount.update(e.total.death),e.recoveredCount.update(e.total.recovered),e.timer=e.timerAmount})),e.headers=d.getHeaders()},cleanData:function(){this.total={confirmed:0,death:0,recovered:0,new_confirmed:0,new_death:0,new_recovered:0},this.cases=[],this.lastUpdated=null,this.confirmedCount.reset(),this.deathCount.reset(),this.recoveredCount.reset(),this.timer=this.timerAmount},selectCountry:function(e){this.filters[0]={name:"country",value:e},this.reload(),this.tableSearch="",this.pageHead="COVID-19 Cases - "+e,this.dataTableHead=e+" cases by states"},clockTick:function(){this.currentTime=new Date,this.timer>0?this.timer--:this.reload()},timerFormat:function(e){return(Math.floor(e/60)+"").padStart(2,"0")+":"+(e%60+"").padStart(2,"0")},getBreadcrumbs:function(){var e=[{text:"Global Cases",disable:!1,href:"/"}];return this.filters.length>0&&e.push({text:this.filters[0].value,disable:!1}),e}}},m=(r(270),r(53)),v=r(134),f=r.n(v),h=r(343),_=r(264),w=r(254),C=r(246),y=r(258),x=r(337),F=r(338),S=r(341),T=r(259),k=r(256),I=r(339),V=r(340),D=r(331),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{attrs:{"grid-list-xs":""}},[e.filters.length>0?r("v-breadcrumbs",{staticClass:"pa-0",attrs:{items:e.getBreadcrumbs()}}):e._e(),r("h1",{staticClass:"text-center"},[e._v(e._s(e.pageHead))]),r("v-row",[r("v-col",[r("v-chip",{attrs:{label:""}},[e._v(e._s(e.timeFormatter.format(e.currentTime)))])],1),r("v-spacer"),r("v-col",[r("v-chip",{attrs:{label:""}},[e._v("Last updated:"),r("i",{staticClass:"text--primary"},[e._v(e._s(e.timeFormatter.format(e.lastUpdated)))])])],1),r("v-spacer"),r("v-col",{staticClass:"text-right"},[r("v-btn",{staticClass:"ml-2 lighten-4",attrs:{small:"",color:"teal"},on:{click:e.reload}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-reload")]),e._v("Refresh in "+e._s(e.timerFormat(e.timer)))],1)],1)],1),r("v-progress-linear",{attrs:{value:(e.timerAmount-e.timer)/e.timerAmount*100}}),r("v-row",[r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"warning",shaped:""}},[r("v-card-text",[r("div",[e._v("Confirmed")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"confirmedId"}},[e._v(e._s(e.numFormater.format(e.total.confirmed)))])]),r("div",[e._v("New confimed")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newConfirmedId"}},[e._v(e._s(e.numFormater.format(e.total.new_confirmed)))])])])],1)],1),r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"error",shaped:""}},[r("v-card-text",[r("div",[e._v("Deaths")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"deathId"}},[e._v(e._s(e.numFormater.format(e.total.death)))])]),r("div",[e._v("New deaths")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newDeathId"}},[e._v(e._s(e.numFormater.format(e.total.new_death)))])])])],1)],1),r("v-col",{attrs:{col:"4"}},[r("v-card",{staticClass:"mx-auto",attrs:{color:"success",shaped:""}},[r("v-card-text",[r("div",[e._v("Recovered")]),r("p",{staticClass:"display-2 text--primary"},[r("span",{attrs:{id:"recoveredId"}},[e._v(e._s(e.numFormater.format(e.total.recovered)))])]),r("div",[e._v("New recovered")]),r("div",{staticClass:"display-1 white--text"},[r("span",{attrs:{id:"newRecoveredId"}},[e._v(e._s(e.numFormater.format(e.total.new_recovered)))])])])],1)],1)],1),r("v-card",[r("v-card-title",[r("h3",[e._v(e._s(e.dataTableHead))]),r("v-spacer"),r("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",clearable:""},model:{value:e.tableSearch,callback:function(t){e.tableSearch=t},expression:"tableSearch"}})],1),r("v-card-text",[r("v-data-table",{attrs:{headers:e.headers,items:e.cases,"items-per-page":e.perPage,sortBy:e.sortBy,search:e.tableSearch,sortDesc:""},scopedSlots:e._u([{key:"item.country_region",fn:function(t){var n=t.item;return[n.facet_count>1?r("a",{on:{click:function(t){return e.selectCountry(n.country_region)}}},[e._v(e._s(n.country_region))]):r("span",[e._v(e._s(n.country_region))])]}},{key:"item.confirmed",fn:function(t){var r=t.item;return[e._v(e._s(e.numFormater.format(r.confirmed)))]}},{key:"item.new_confirmed",fn:function(t){var r=t.item;return[e._v(e._s(e.numFormater.format(r.new_confirmed)))]}},{key:"item.death",fn:function(t){var r=t.item;return[e._v(e._s(e.numFormater.format(r.death)))]}},{key:"item.new_death",fn:function(t){var r=t.item;return[e._v(e._s(e.numFormater.format(r.new_death)))]}},{key:"item.recovered",fn:function(t){var r=t.item;return[e._v(e._s(e.numFormater.format(r.recovered)))]}}])})],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBreadcrumbs:h.a,VBtn:_.a,VCard:w.a,VCardText:C.a,VCardTitle:C.b,VChip:y.a,VCol:x.a,VContainer:F.a,VDataTable:S.a,VIcon:T.a,VProgressLinear:k.a,VRow:I.a,VSpacer:V.a,VTextField:D.a})}}]);